<p-toast />
<app-loading-spinner [loading]="loading()" />
<div *ngIf="!loading()">
    <div class="flex mb-4">
        <div class="card flex flex-col gap-4 w-full">
            <div class="flex flex-row justify-between items-center">
                <div class="flex flex-wrap">
                    <div class="flex flex-col gap-2">
                        <div>
                            <span class="text-xl font-bold">Deal Name</span>
                        </div>
                        <div>
                            <i class="pi pi-fw pi-sitemap mr-2"></i>
                            <span class="text-xl font-bold">Pipeline Name</span>
                            <i class="pi pi-arrow-right m-2"></i>
                            <span class="text-xl font-bold">Stage Name</span>
                        </div>
                        <div class="text-center">
                            <i class="pi pi-pen-to-square rounded mr-2" severity="success"></i>
                            <i class="pi pi-dollar rounded mr-2" severity="success"></i>
                            <span class="text-xl font-bold">0 EGP</span>
                        </div>
                    </div>
                </div>

                <div class="flex flex-col justify-end gap-2">
                    <div class="flex flex-row justify-between items-center gap-2">
                        <p-button label="{{ 'deals.win' | translate}}" severity="success" (click)="addDeal()" />
                        <p-button label="{{ 'deals.lost' | translate}}" severity="danger" (click)="addDeal()" />
                        <p-button label="{{ 'deals.offer' | translate}}" severity="warn" (click)="addDeal()" />
                    </div>
                    <div class="flex flex-row justify-between items-center gap-2">
                        <p-button label="{{ 'common.edit' | translate}}" icon="pi pi-pencil" (click)="addDeal()" />
                        <p-button label="{{ 'common.save' | translate}}" icon="pi pi-save" (click)="addDeal()" />
                        <p-button label="{{ 'common.close' | translate}}" icon="pi pi-undo" (click)="back()" />
                    </div>
                    <div class="text-end mt-3 text-surface-500">
                        <i class="pi pi-calendar-clock rounded mr-2"></i>
                        <span class="text-sm font-bold">26/08/2023 21:57</span>
                    </div>
                </div>
            </div>
        </div>
    </div>
    <div class="flex flex-row w-full gap-2">
        <div class="flex flex-col w-1/2" [ngClass]="{'w-1/2': collapsed, 'hidden': !collapsed}">
            <div class="card md:col-span-6 ">
                <div class="text-center mb-6">
                    <i class="pi pi-search rounded mr-2"></i>
                    <span class="text-lg font-bold">{{'add_edit_deal.details' | translate}}</span>
                </div>
                <div class="flex flex-col gap-4">
                    <div class="flex justify-between items-start">
                        <div class="text-md font-medium w-1/3">{{'add_edit_deal.description' | translate}}</div>
                        <span class="font-medium text-surface-500 dark:text-surface-400 text-md w-2/3 text-center">
                            dummy for now
                        </span>
                    </div>
                    <div class="flex justify-between items-start">
                        <div class="text-md font-medium w-1/3">{{'add_edit_deal.deal_value' | translate}}
                        </div>
                        <span class="font-medium text-surface-500 dark:text-surface-400 text-md w-2/3 text-center">
                            dummy for now
                        </span>
                    </div>
                    <div class="flex justify-between items-start">
                        <div class="text-md font-medium w-1/3">{{'add_edit_deal.deal_status' | translate}}</div>
                        <span class="font-medium text-surface-500 dark:text-surface-400 text-md w-2/3 text-center">
                            dummy for now
                        </span>
                    </div>
                    <div class="flex justify-between items-start">
                        <div class="text-md font-medium w-1/3">{{'add_edit_deal.commit' | translate}}</div>
                        <span class="font-medium text-surface-500 dark:text-surface-400 text-md w-2/3 text-center">
                            dummy for now
                        </span>
                    </div>
                </div>
            </div>
            <div class="card md:col-span-6 ">
                <div class="text-center mb-6">
                    <span class="text-lg font-bold">{{'add_edit_deal.product' | translate}}</span>
                </div>
                <div class="flex flex-col gap-4">
                    <div class="flex justify-between items-start">
                        <div class="text-md font-medium w-1/3">{{'add_edit_deal.vendor_name' | translate}}</div>
                        <span class="font-medium text-surface-500 dark:text-surface-400 text-md w-2/3 text-center">
                            dummy for now
                        </span>
                    </div>
                    <div class="flex justify-between items-start">
                        <div class="text-md font-medium w-1/3">{{'add_edit_deal.product_category_name' | translate}}
                        </div>
                        <span class="font-medium text-surface-500 dark:text-surface-400 text-md w-2/3 text-center">
                            dummy for now
                        </span>
                    </div>
                    <div class="flex justify-between items-start">
                        <div class="text-md font-medium w-1/3">{{'add_edit_deal.product_name' | translate}}</div>
                        <span class="font-medium text-surface-500 dark:text-surface-400 text-md w-2/3 text-center">
                            dummy for now
                        </span>
                    </div>
                    <div class="flex justify-between items-start">
                        <div class="text-md font-medium w-1/3">{{'add_edit_deal.standard_price' | translate}}</div>
                        <span class="font-medium text-surface-500 dark:text-surface-400 text-md w-2/3 text-center">
                            dummy for now
                        </span>
                    </div>
                    <div class="flex justify-between items-start">
                        <div class="text-md font-medium w-1/3">{{'add_edit_deal.validity' | translate}}</div>
                        <span class="font-medium text-surface-500 dark:text-surface-400 text-md w-2/3 text-center">
                            dummy for now
                        </span>
                    </div>
                </div>

            </div>
            <div class="card md:col-span-6 ">
                <div class="text-center mb-6">
                    <span class="text-lg font-bold">{{'add_edit_deal.service' | translate}}</span>
                </div>
                <div class="flex flex-col gap-4">
                    <div class="flex justify-between items-start">
                        <div class="text-md font-medium w-1/3">{{'add_edit_deal.service_category_name' | translate}}
                        </div>
                        <span class="font-medium text-surface-500 dark:text-surface-400 text-md w-2/3 text-center">
                            dummy for now
                        </span>
                    </div>
                    <div class="flex justify-between items-start">
                        <div class="text-md font-medium w-1/3">{{'add_edit_deal.service_name' | translate}}
                        </div>
                        <span class="font-medium text-surface-500 dark:text-surface-400 text-md w-2/3 text-center">
                            dummy for now
                        </span>
                    </div>
                </div>
            </div>
            <div class="card md:col-span-6 ">
                <div class="text-center mb-6">
                    <i class="pi pi-fw pi-sitemap rounded mr-2"></i>
                    <span class="text-lg font-bold">{{'add_edit_deal.organization' | translate}}</span>
                </div>
                <div class="flex flex-col gap-4">
                    <div class="flex justify-between items-start">
                        <div class="text-md font-medium w-1/3">{{'add_edit_deal.organization_name' | translate}}</div>
                        <span class="font-medium text-surface-500 dark:text-surface-400 text-md w-2/3 text-center">
                            dummy for now
                        </span>
                    </div>
                    <div class="flex justify-between items-start">
                        <div class="text-md font-medium w-1/3">{{'add_edit_deal.address' | translate}}
                        </div>
                        <span class="font-medium text-surface-500 dark:text-surface-400 text-md w-2/3 text-center">
                            dummy for now
                        </span>
                    </div>
                    <div class="flex justify-between items-start">
                        <div class="text-md font-medium w-1/3">{{'add_edit_deal.telephone_1' | translate}}</div>
                        <span class="font-medium text-surface-500 dark:text-surface-400 text-md w-2/3 text-center">
                            dummy for now
                        </span>
                    </div>
                    <div class="flex justify-between items-start">
                        <div class="text-md font-medium w-1/3">{{'add_edit_deal.telephone_2' | translate}}</div>
                        <span class="font-medium text-surface-500 dark:text-surface-400 text-md w-2/3 text-center">
                            dummy for now
                        </span>
                    </div>
                    <div class="flex justify-between items-start">
                        <div class="text-md font-medium w-1/3">{{'add_edit_deal.website' | translate}}</div>
                        <span class="font-medium text-surface-500 dark:text-surface-400 text-md w-2/3 text-center">
                            dummy for now
                        </span>
                    </div>
                </div>
            </div>
        </div>
        <button type="button" class="splitter-toggle" (click)="toggleDetails()" [attr.aria-expanded]="!collapsed"
            aria-label="Toggle details">
            <i class="pi" [ngClass]="collapsed ?  'pi-angle-double-left': 'pi-angle-double-right'"></i>
        </button>
        <div class="flex flex-col w-1/2" [ngClass]="collapsed ? 'w-1/2' : 'w-full'">
            <div class="card md:col-span-6 ">
                <p-tabs value="0">
                    <p-tablist>
                        <p-tab value="0">
                            <i class="pi pi-file"></i>
                            {{'add_edit_deal.notes' |translate}}
                        </p-tab>
                        <p-tab value="1">
                            <i class="pi pi-user"></i>
                            {{'add_edit_deal.activities' |translate}}
                        </p-tab>
                    </p-tablist>
                    <p-tabpanels>
                        <p-tabpanel value="0">
                            <div class="w-full flex flex-col items-center">
                                <textarea pTextarea [autoResize]="true"
                                    placeholder="{{'add_edit_deal.write_your_notes_here' | translate}}" rows="5"
                                    class="w-full"></textarea>
                                <p-button label="{{'common.add' | translate}}" icon="pi pi-plus-circle"
                                    class="mt-2"></p-button>
                            </div>
                        </p-tabpanel>
                        <p-tabpanel value="1">
                            <p-button label="{{'common.add' | translate}}" icon="pi pi-plus-circle" class="mt-2"
                                (click)="onAddActivity()"></p-button>

                        </p-tabpanel>
                    </p-tabpanels>
                </p-tabs>
            </div>
        </div>
    </div>

    <add-edit-activity-dialog [showActivityDialog]="showAddActivityDialog" />
</div>